참고: https://jojoldu.tistory.com/243

### 인덱스


인덱스란 지정한 컬럼들을 기준으로 메모리 영역에 일종의 목차를 생성하는 것

그렇다면, 인덱스를 왜 사용할까?

<br>

### 어플리케이션의 특성을 살펴보자.

우리 서비스로 들어온 사용자의 행동을 예측해보자.
페이지 이동이 많을까? 항상 새로운 컨텐츠를 만들까?

당연히, 페이지 이동이 많을 것으로 예상한다.
(상식적으로, 300명의 조회 수의 게시물에 댓글이 300개 달린 것을 봤나?)

페이지 이동이 많다는 것이 뭘까?

CSR 기준으로 Front 화면에 데이터를 채워놓기 위해, 서버로 데이터 요청을 한다는 것이 많다는 것이다.



이러한 상황에서, 데이터베이스에서 데이터를 가져오는 시간이 오래걸린다고 하자.

그렇다면, 사용자 입장에서는 어떠한가?..

내가 봤을 때 데이터를 가져오다가 .. 사용자는 새로고침을 계속 누른다.

이게 한명이 아니라, 몇 백명이라면 어떻게 될까?

우리는 첫번째로, 데이터베이스 계층에서 최적화할 수 있는 부분은 최적화할 수 있을 것 같다.

우선, 인덱스의 구조에 대해서 살펴보자.

B - Tree 구조이다.

B Tree 구조는 데이터가 추가 삭제 된다면 트리를 균형있게 유지하려고 자체적으로 정렬한다.

만약, 트리 구조가 계속 변경된다면, 이 부분도 계속 업데이트 해줘야하기 때문에, insert, update, delete에 성능이 저하되는 문제점이 발생하는 것이다.


### 인덱스 컬럼의 기준

1개의 컬럼만 인덱스를 걸어야 한다면, 어떤 컬럼을 걸어야할까?

카디널리티(Cardinality)가 가장 높은 것을 잡아야 한다.

> 카디널리티란 해당 컬럼의 중복된 수치를 나타낸다.  
> 예를 들어 성별 혹은 학년 등은 카디널리티가 낮다고 얘기한다.  
> 반대로, 주민등록번호 혹은 계좌번호 등은 카디널리티가 높다고 얘기한다.

인덱스로 최대한 회율을 뽑아내려면, 해당 인덱스로 많은 부분을 걸러내야 하기 때문이다.